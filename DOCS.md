# Landing Page (LP) Skeleton

[https://github.com/prestoheads/landing-skeleton](https://github.com/prestoheads/landing-skeleton)  
Темплейт для встраиваемых сайтов (интеграция для ozon, faberlic, прочих сайтов)

Правила для написания css для лендинга описаны в документе [Верстка ОЗОН](https://app.clickup.com/2550458/v/dc/2dunu-1779/2dunu-11061).



### Шаги при создании нового проекта:

1.  Спулить репозиторий темплейта.
2.  Удалить папку .git
3.  Открыть консоль в папке с темплейтом, инициализировать новый репозиторий и добавить ремоут на репозиторий проекта
4.  Выполнить команду

<pre data-block-id="block-caa07cda-fd93-4d55-a21e-84fa1725f332" data-language="plain">npm i</pre>



## Заметки по процессу разработки:



### Линтер

Для комфортной разработки и подсветки синтаксиса необходимо подключить вотчеры, плагин prettier а так же настроить ide.

Ниже приведена инструкция для IDE от JetBrains:

1.  Включение подсветки ошибок линтера для scss

![](https://t2550458.p.clickup-attachments.com/t2550458/7d3f2d80-e3f9-4a29-90cb-31271ee15ae7/image.png)

2\. Включение подсветки ошибок линтера для ESLint

![](https://t2550458.p.clickup-attachments.com/t2550458/ff10b6a9-1be6-4fd3-8678-fb11611e135c/image.png)

3\. Плагин Prettier

![](https://t2550458.p.clickup-attachments.com/t2550458/149f7363-db19-4f1b-832a-3f1abdd43ba9/image.png)

4\. Импорт вотчеров. Качаем файл с вотчерами, открываем в настройках IDE пункт File Watchers, нажимаем на кнопочку указанную стрелкой на скриншоте, выбираем вотчеры и нажимаем ok. После этого ставим всем вотчерам чекбоксы и level: global (как на скриншоте). Далее ждём на кнопку apply и ok в правом нижнем углу настроек

![](https://t2550458.p.clickup-attachments.com/t2550458/abfde66a-7e44-4efb-b822-c38c96133ecf/image.png)

Для IDE VS code ознакомиться со [статьёй](https://www.digitalocean.com/community/tutorials/workflow-auto-eslinting) и [ещё одной статьёй](https://bzvyagintsev.ru/blog/stylelint/) (начиная с параграфа "**Настраиваем VS Code**"), а так же установить [плагин Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode), [плагин Stylelint](https://marketplace.visualstudio.com/items?itemName=stylelint.vscode-stylelint)



### CSS и относительные единицы измерения

Так как данный темплейт используется для интеграций, rem использовать нельзя, так что используем em.

Логика скейлинга описана в файле /src/assets/scss/utility/_layout.scss

Там подробно расписан весь скейлинг и его логика



### Файловая структура проекта

**HTML**

В темплейте используется шаблонизатор pug. Корневой элемент .pug - index.pug, расположенный по пути /src/index.pug. Внутри данного файла подключаются секции.

внутри файла src/components/layout.pug находится базовая html-структура, которую при необходимости можно менять

Каждая полноценная секция сайта должна находиться в папке /src/components/sections/

![](https://t2550458.p.clickup-attachments.com/t2550458/1821ca6e-38de-4b8e-8439-b21d279ed8b8/image.png)

Обособленные и/или переиспользуемые элементы страницы, у которых большое количество стилей, которые однако не являются полноценными секциями а используются внутри них помещаются в папку /src/components/blanks/

В корневом элементе /src/index.pug секции вставляются подобным образом через include:

![](https://t2550458.p.clickup-attachments.com/t2550458/8ffaea01-d3a4-4616-83eb-ac98404297a9/image.png)

**SCSS**

Файлы стилей распологаются по пути /src/assets/scss/. Примерная структура:

![](https://t2550458.p.clickup-attachments.com/t2550458/b22b7265-719b-485c-a210-bc604c5dd292/image.png)

/blanks/ - директория, содержащая стили компонентов бланков.

/sections/ - директория, содержащая стили компонентов секций.

/ui/ - директория, сожержащая стили ui-элементов (кнопки, инпуты, etc.).

/utility/ - директория, содержащая базовые файлы стилей.

/styles.scss - корневой файл scss, в который импортируются все остальные файлы

![](https://t2550458.p.clickup-attachments.com/t2550458/7a4ff31c-abe0-4f57-9140-274c1059d830/image.png)

**JS**

Точка входа js находится по адресу /src/index.js:

![](https://t2550458.p.clickup-attachments.com/t2550458/c72fd563-89c0-4592-a6b2-433e739cf542/image.png)

Всю логику секций необходимо импортировать в данный файл.

Файлы js расположены в папке /src/js/.

Структура аналогична scss:

![](https://t2550458.p.clickup-attachments.com/t2550458/27e02a0b-0941-41c7-9af3-27113180251f/image.png)

/sections/ - директория, содержащая логику компонентов секций.

/utility/ - директория, содержащая полезные для разработки скрипты наработки (например, getScroll, deviceSize).

В случае с JS ситуация не такая строгая, так как многое может быть ситуативно, но всё же лучше придерживаться бем-нейминга

**Глобальный бем-нейминг**

Чтобы сохранять максимально прозрачную параллель между css, html, js и файлами ассетов необходимо придерживаться единых стандартов именования файлов и папок.

Проведу на простом примере. Существует компонент header по пути /src/components/sections/header.pug.

![](https://t2550458.p.clickup-attachments.com/t2550458/aa6ce22e-68c1-49e3-80c6-bf3a6b7c99b9/image.png)

Css для данного компонента должен храниться в файле /src/assets/scss/sections/header.scss

![](https://t2550458.p.clickup-attachments.com/t2550458/018c2b29-e32a-4afb-bedf-60e060335f37/image.png)

JS для данного компонента должен храниться в файле /src/js/sections/header.js

![](https://t2550458.p.clickup-attachments.com/t2550458/8b1b274d-c19d-4512-8387-6704a011271b/image.png)

Изображения, которые находятся в компоненте header должны находиться по пути /src/assets/images/header/

![](https://t2550458.p.clickup-attachments.com/t2550458/46763135-e23e-45c8-a7e3-884126fdb4b0/image.png)

Таким образом интуитивно понятно, что все файлы одного компонента связаны между собой.



### Работа с картинками

В темплейт встроен оптимизатор изображений.

Все изображения из фигмы должны экспортироваться в разрешении х4 и сохраняться в папке /src/assets/images/.

Чтобы изображения не были слишком большого размера их можно заресайзить - написать в квадратных скобках перед названием изображения его желаемую ширину в пикселях.

Пример:

![](https://t2550458.p.clickup-attachments.com/t2550458/f967ed2f-0cb3-40af-ba56-f85664b5ac55/image.png)

Данные изображения являются исходниками, после сохранения необходимо выполнить команду

<pre data-block-id="block-32aee580-2ed4-40a2-a18f-1a129cfd9132" data-language="plain">npm run webp</pre>

Эта команда оптимизирует картинки, ресайзит их в случае если в названии есть число в квадратных скобках.

Оптимизированные изображения помещаются в папку public/images/.

**Все пути к изображениям в html/css должны отсылаться именно к этой папке**.

Изображения к которым применялся ресайз сохраняются без квадратных скобок

Опционально имеется возможность генерировать изображения в формате .webp

Конфиг для настройки скрипта и сам скрипт находятся в папке /tools/

![](https://t2550458.p.clickup-attachments.com/t2550458/f6ca1eab-8ec1-4a01-9bf2-d557f5198147/image.png)

Стандартный конфиг:

![](https://t2550458.p.clickup-attachments.com/t2550458/35395482-7bbd-46d5-a9e8-0ff826fef229/image.png)



### Финальная сборка проекта

В темплейте учтено несколько скриптов для билда, которые выполняются по следующей концептуальной структуре:

<pre data-block-id="block-a51d5317-5171-47ee-a3e8-fa420ca93b36">preBuild -> build -> postBuild;</pre>

В контексте темплейта при выполнении скрипта build через

<pre data-block-id="block-32a3aeb9-5cd2-45e0-b1c0-3cea48f098dc" data-language="plain">npm run build</pre>

Будет происходить следующее:

1.  Выполнится скрипт npm run webp, который генерирует оптимизированные изображения:

![](https://t2550458.p.clickup-attachments.com/t2550458/bde5bd03-319a-4318-b9be-a8d0d134f0a1/image.png)

2\. Выполнится скрипт buildLogic, который оптимизирует весь код для продакшна и создаёт статичные сбилженные файлы:

![](https://t2550458.p.clickup-attachments.com/t2550458/d249fc75-6410-4ce9-9eb9-1e19ca8562fc/image.png)

3\. Выполняется скрипт archive, который генерирует архивы с исходниками и билдом в папку archives:

![](https://t2550458.p.clickup-attachments.com/t2550458/c3a9a948-b1de-4bb2-9828-ad8bc1e38bb4/image.png)

![](https://t2550458.p.clickup-attachments.com/t2550458/4b480859-44e8-41bd-ae83-7b4983d45526/image.png)
